<!--   @author:Areej -->

<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8"/>
    <title>Travel Planner</title>
    <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script
            src="https://kit.fontawesome.com/fc95cba7ed.js"
            crossorigin="anonymous"
    ></script>

</head>
<body>
<div class="container top">
    <div class="row">
        <div class="col-lg-6">
            <div class="panel panel-default">
                <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder">Days Duration</h6>&nbsp
                      <h6 style="font-weight:bolder">{{ days_diff }}</h6>
                </div>
                <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder">Total Budget</h6>&nbsp
                      <h6 style="font-weight:bolder">{{ budget }} GBP</h6>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6">
            <div class="panel panel-default">
                <i class="fas fa-plane" style="font-size:36px;float:right"></i>
                <h2 style="float:left;margin-top:0px !important">Flight Information</h2>
                <div class="panel-body">
             <img class="img-responsive" src="https://static.routesonline.com/images/cached/newsarticle-155570-scaled-580x0.jpg" id="Panel_Image" width="550" height="300" >
          </div>
                <div style="margin-top:5%;margin-left:10px">
                  <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder"> Flight Name</h6>&nbsp
                      <h6 style="font-weight:bolder;color:white;background-color:#000261">{{ name }}</h6>
                  </div>
                  <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder">Price</h6>&nbsp
                  <h6 style="font-weight:bolder">{{ price }}</h6>
                  </div>

                  <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder">Cabin</h6>&nbsp
                      <h6 style="font-weight:bolder">{{ cabin }}</h6>
                  </div>

                  <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder">Flight Duration</h6>&nbsp
                      <h6 style="font-weight:bolder">{{ duration }}</h6>
                  </div>

                  <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder"> Departure Airport</h6>&nbsp
                      <h6 style="font-weight:bolder">{{ dep_airport }}</h6>
                  </div>

                  <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder"> Departure Time</h6>&nbsp
                      <h6 style="font-weight:bolder">{{ dtime }}</h6>
                  </div>

                  <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder"> Arrival Airport</h6>&nbsp
                      <h6 style="font-weight:bolder">{{ arr_airport }}</h6>
                  </div>

                  <div style="display:flex">
                  <h6 style="color:grey; font-weight:bolder"> Arrival Time</h6>&nbsp
                      <h6 style="font-weight:bolder">{{ atime }}</h6>
                  </div>

              </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="panel panel-default">
                <i class="fa fa-hotel" style="font-size:36px;float:right"></i>
                <h2 style="float:left;margin-top:0px !important">Hotel Information</h2>
                <div style="margin-top:10%;margin-left:10px">
                    <div class="panel-body">
                          <img class="img-responsive" src="https://cdn.pixabay.com/photo/2016/04/15/11/48/hotel-1330850_960_720.jpg" id="Panel_Image" width="550" height="300" >
                    </div>

                    <div style="display:flex">
                        <h6 style="color:grey; font-weight:bolder"> Hotel Name:</h6>&nbsp
                        <h6 style="font-weight:bolder">{{ hotel_data.name }}</h6>
                    </div>
                    <div style="display:flex">
                        <h6 style="color:grey; font-weight:bolder"> Hotel Address:</h6>&nbsp
                        <h6 style="font-weight:bolder">{{ hotel_data.position }}</h6>
                    </div>
                    <div style="display:flex">
                        <h6 style="color:grey; font-weight:bolder"> Hotel Stay Price Per Day:</h6>&nbsp
                        <h6 style="font-weight:bolder">{{ hotel_data.day_price }} GBP</h6>
                    </div>
                    <div style="display:flex">
                        <h6 style="color:grey; font-weight:bolder"> Hotel Stay Price Total:</h6>&nbsp
                        <h6 style="font-weight:bolder">{{ hotel_data.price }} GBP</h6>
                    </div>
                    <div style="display:flex">
                        <h6 style="color:grey; font-weight:bolder"> Hotel Contact:</h6>&nbsp
                        <h6 style="font-weight:bolder">{{ hotel_data.communication }}</h6>
                    </div>

                </div>
            </div>
        </div>


    </div>
    <div class="row">
    {% for day in range(1,days_diff) %}
        <div class="col-lg-4">
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <h5 style="font-weight:bolder">City {{ city }}</h5>
                        <h5 style="font-weight:bolder">day {{ day }}</h5>
                        <h6 style="font-weight:bolder;color:grey">{{ dates[day-1] }}  </h6>
                    </div>
                </div>
            </div>
            {% for item in days_activities[(day-1)*6:(day)*6] %}
                {% if "transportation" in item.type %}

                    <div class="row">
                            <div class="col-lg-12">
                                <div class="panel panel-default">
                                    <i class="fa fa-bus" style="font-size:36px;float:right"></i>
                                    <h3 style="float:left;margin-top:0px !important">Transportation</h3>
                                    <div class="panel-body">
                                         <img class="img-responsive" src="https://www.glavny.tv/sites/default/files/styles/large/public/mainphotos/157845/gruzovik-protaranil-stoyashchiy-avtobus-s-detmi-vo-francii-144017.jpg?itok=vMOwBfo9" id="Panel_Image">
                                      </div>
                                    <div style="margin-top:10%;margin-left:1px">
                                        <div style="padding-left:10px">
                                            <h6>Transportation Type: <span class="badge">Transit</span></h6>
                                            <h6>From :{{ item.from_place }}</h6>
                                            <h6>To :{{ item.to_place }}</h6>
                                            <h6>Allotted Time:{{ item.time_range}}</h6>
                                            <h6>Average Travel Distance:{{ item.total_distance }}</h6>
                                            <h6>Average price(GBP):{{ item.total_price }}</h6>
                                            <h6>Average time :{{ item.total_duration }}</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                {% else %}
                    <div class="row">
                            <div class="col-lg-12">
                                <div class="panel panel-default">

                                    <div class="panel-body">
                                         <img class="img-responsive" src="{{ item.photo }}">
                                    </div>
                                    <div style="padding-left:10px">
                                        <h6>Allotted Time: {{ item.time_range }} </h6>
                                        <h6>Type: <span class="badge">{{ item.type }}</span> </h6>
                                        <h6>Name: {{ item.name }} </h6>
                                        <h6>Rating: {{ item.rating }} </h6>
                                        <h6>Address: {{ item.address }} </h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                {% endif %}
            {% endfor %}
        </div>
    {% endfor %}
    </div>
</div>
<div style="text-align: center;">
    <input id="renderPdf" type="submit" class="btn btn-success" value="PDF">
    <form action="/email" method="post">
        <input id="renderPdf" type="submit" class="btn btn-default" value="Email Input">
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>

<script type="text/javascript">
    var downPdf = document.getElementById("renderPdf");

    downPdf.onclick = function () {
        html2canvas(document.body, {
          logging: true,
          letterRendering: 1,
          allowTaint: false,
          useCORS: true,
          onrendered: function(canvas) {

            var imgData = canvas.toDataURL("image/png");

        var imgWidth = 210;
        var pageHeight = 295;
        var imgHeight = canvas.height * imgWidth / canvas.width;
        var heightLeft = imgHeight;
        var doc = new jsPDF('p', 'mm');
        var position = 0;

        doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
        heightLeft -= pageHeight;

        while (heightLeft >= 0) {
            position = heightLeft - imgHeight;
            doc.addPage();
            doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
            heightLeft -= pageHeight;

            doc.save('plan.pdf');

        }

          }

        });
    }

</script>
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.js"></script>
<style>
    @import "https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css";
body {
  font-family: sans-serif;
  background: url("/static/images/s2.jpg");
  animation-name: myfirst;
  animation-duration: 12s;

  animation-delay: 3s;

  animation-iteration-count: infinite;

  animation-play-state: running;

}
.top {
  padding-top: 5%;
}

</style>
</body>


</html>
